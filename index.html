<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CodeFixer - Sistema de OrÃ§amentos</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
    font-family: Arial;
    background:#f4f6f9;
    padding:20px;
}

h1{
    text-align:center;
}

input, button{
    padding:10px;
    margin:5px 0;
    width:100%;
    border-radius:5px;
    border:1px solid #ccc;
}

button{
    background:#1e88e5;
    color:white;
    border:none;
    cursor:pointer;
}

button:hover{
    opacity:0.9;
}

.card{
    background:white;
    padding:15px;
    margin-top:15px;
    border-radius:8px;
    box-shadow:0 2px 8px rgba(0,0,0,0.1);
}
</style>
</head>
<body>

<h1>CodeFixer - Sistema de Clientes</h1>

<input type="text" id="nome" placeholder="Nome do Cliente">
<input type="text" id="telefone" placeholder="Telefone com DDD">
<input type="text" id="endereco" placeholder="EndereÃ§o">
<input type="text" id="servico" placeholder="Tipo de ServiÃ§o">
<input type="number" id="valor" placeholder="Valor do ServiÃ§o">
<input type="date" id="data">
<input type="time" id="hora">

<button onclick="adicionar()">Adicionar Cliente</button>

<div id="lista"></div>

<script>
let clientes = JSON.parse(localStorage.getItem("clientes")) || [];
let lista = document.getElementById("lista");

function salvar(){
    localStorage.setItem("clientes", JSON.stringify(clientes));
}

function adicionar(){
    const cliente = {
        nome: nome.value,
        telefone: telefone.value,
        endereco: endereco.value,
        servico: servico.value,
        valor: parseFloat(valor.value),
        data: data.value,
        hora: hora.value
    };

    clientes.push(cliente);
    salvar();
    mostrar();

    document.querySelectorAll("input").forEach(i => i.value = "");
}

function excluir(index){
    clientes.splice(index,1);
    salvar();
    mostrar();
}

function mostrar(){
    lista.innerHTML = "";
    clientes.forEach((c,i)=>{
        lista.innerHTML += `
        <div class="card">
            <b>ğŸ‘¤ ${c.nome}</b><br>
            ğŸ“ ${c.telefone}<br>
            ğŸ“ ${c.endereco}<br>
            ğŸ›  ${c.servico}<br>
            ğŸ’° R$ ${c.valor.toFixed(2)}<br>
            ğŸ“… ${c.data} â° ${c.hora}<br><br>

            <button onclick="gerarOrcamento(${i})">ğŸ§¾ Gerar OrÃ§amento</button>
            <button onclick="enviarWhatsApp(${i})" style="background:#25D366;">ğŸ“± Enviar WhatsApp</button>
            <button onclick="excluir(${i})" style="background:red;">Excluir</button>
        </div>`;
    });
}

function gerarOrcamento(index){

    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const cliente = clientes[index];
    const numeroOrcamento = Math.floor(Math.random()*10000);
    const dataAtual = new Date().toLocaleDateString("pt-BR");

    const img = new Image();
    img.src = "logo.png";

    img.onload = function(){

        doc.addImage(img, "PNG", 10, 10, 40, 20);

        doc.setFontSize(20);
        doc.text("CodeFixer", 105, 20, { align: "center" });

        doc.setFontSize(16);
        doc.text("ORÃ‡AMENTO", 105, 30, { align: "center" });

        doc.setFontSize(10);
        doc.text(`OrÃ§amento NÂº ${numeroOrcamento}`, 150, 15);
        doc.text(`Data: ${dataAtual}`, 150, 22);

        doc.line(10, 40, 200, 40);

        let y = 50;

        doc.setFontSize(12);
        doc.text(`Cliente: ${cliente.nome}`, 10, y); y += 8;
        doc.text(`Telefone: ${cliente.telefone}`, 10, y); y += 8;
        doc.text(`EndereÃ§o: ${cliente.endereco}`, 10, y); y += 12;

        doc.line(10, y, 200, y);
        y += 10;

        doc.setFontSize(14);
        doc.text("DescriÃ§Ã£o do ServiÃ§o:", 10, y);
        y += 8;

        doc.setFontSize(12);
        doc.text(cliente.servico, 10, y);
        y += 15;

        doc.setFontSize(14);
        doc.text(`Valor Total: R$ ${cliente.valor.toFixed(2)}`, 10, y);
        y += 25;

        doc.line(10, y, 90, y);
        doc.text("Assinatura do Cliente", 10, y + 8);

        doc.save(`Orcamento_${cliente.nome}.pdf`);
    }
}

function enviarWhatsApp(index){

    const cliente = clientes[index];

    let numero = cliente.telefone.replace(/\D/g, '');

    if(!numero.startsWith("55")){
        numero = "55" + numero;
    }

    const mensagem = 
`OlÃ¡ ${cliente.nome}, tudo bem? ğŸ‘‹

Segue o orÃ§amento do seu serviÃ§o:

ğŸ›  ServiÃ§o: ${cliente.servico}
ğŸ’° Valor: R$ ${cliente.valor.toFixed(2)}
ğŸ“… Data: ${cliente.data}
â° Hora: ${cliente.hora}

Qualquer dÃºvida estou Ã  disposiÃ§Ã£o.

â€” CodeFixer ğŸ’»`;

    const url = `https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`;

    window.open(url, '_blank');
}

mostrar();
</script>

</body>
</html>













